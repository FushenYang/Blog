---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import { sortByPubDate } from "../lib/posts";

const books = await getCollection("books");
const sortedBooks = sortByPubDate(books);

const devs = await getCollection("devs");
const sortedDevs = sortByPubDate(devs);

const pageTitle = "博客文章目录";
---

<Layout title={pageTitle}>
  <div class="border w-full my-4 py-4 px-3">
    <div class="text-2xl font-bold mb-8">所有读书笔记链接如下：</div>
    <ul class="link-list space-y-2">
      {
        sortedBooks.map((book) => (
          <li class="list-item">
            [{book.data.pubDate.split(" ")[0]}]
            <a
              class="text-blue-500 hover:text-blue-700 underline transition duration-300 ease-in-out"
              href={"/" + book.data.path}
            >
              {book.data.title}
            </a>
          </li>
        ))
      }
    </ul>
  </div>

  <div class="border w-full my-4 py-4 px-3">
    <div class="text-2xl font-bold mb-8">所有开发笔记链接如下：</div>
    <ul class="link-list space-y-2">
      {
        sortedDevs.map((post) => (
          <li class="list-item">
            [{post.data.pubDate.split(" ")[0]}]
            <a
              class="text-blue-500 hover:text-blue-700 underline transition duration-300 ease-in-out"
              href={"/" + post.data.path}
            >
              {post.data.title}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</Layout>
